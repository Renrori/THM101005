@section Styles
{
    <link href="~/lib/admin/assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="~/store/css/app-saas.min.css" rel="stylesheet" type="text/css" id="app-style" />
}
<main id="main" class="main">
    <div class="pagetitle">
        <h1>Support</h1>
        <nav>
            <ol class="breadcrumb">
                <a class="breadcrumb-item" asp-area="store" asp-controller="Home" asp-action="Index">Home</a>
                <li class="breadcrumb-item active">Support</li>
            </ol>
        </nav>
    </div>
    <section class="section support">
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-body pt-3">
                        <h5 class="card-title">Contact Us</h5>
                        <form class="row g-3 needs-validation" novalidate>
                            <div class="col-md-3">
                                <label for="validationCustom01" class="form-label">Order Id</label>
                                <input type="text" class="form-control" id="validationCustom01" value="1001" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">Delivery num</label>
                                <input type="text" class="form-control" id="validationCustom02" value="50" required>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationCustomUsername" class="form-label">E-mail</label>
                                <div class="input-group has-validation">
                                    <input type="text" class="form-control" id="validationCustomUsername" aria-describedby="inputGroupPrepend" required>
                                    <span class="input-group-text" id="inputGroupPrepend">@@</span>
                                    <input type="text" class="form-control" id="validationCustomUsername" aria-describedby="inputGroupPrepend" placeholder="gmail.com" required>
                                    <div class="invalid-feedback">
                                        Please provide a valid email.
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="validationCustom03" class="form-label">Store Name</label>
                                <input type="text" class="form-control" id="validationCustom03" required>
                                <div class="invalid-feedback">
                                    Cannot be empty.
                                </div>
                            </div>
                            <div class="input-group">
                                <span class="input-group-text">Feedback</span>
                                <textarea class="form-control" aria-label="With textarea"></textarea>
                            </div>
                            <div></div>
                            <div class="col-12">
                                <button class="btn btn-primary" type="submit">Submit form</button>
                            </div>
                        </form>

                        

                    </div>
                </div>
				<h3>ConnectionId: <span id ="SelfID"></span></h3>
                <div class="content-page" style="margin-left:0px;">
                    <div class="content">
                        <!-- Start Content-->
                        <div class="container-fluid">
                            <div class="row">
                                <!-- start chat users-->
                                <div class="col-xxl-3 col-xl-6 order-xl-1">
                                    <div class="card">
                                        <div class="card-body p-0">
                                            @*<ul class="nav nav-tabs nav-bordered">
                                                <li class="nav-item">
                                                    <a href="#allUsers" data-bs-toggle="tab" aria-expanded="false" class="nav-link active py-2">
                                                        All
                                                    </a>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="#favUsers" data-bs-toggle="tab" aria-expanded="true" class="nav-link py-2">
                                                        Favourties
                                                    </a>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="#friendUsers" data-bs-toggle="tab" aria-expanded="true" class="nav-link py-2">
                                                        Friends
                                                    </a>
                                                </li>
                                            </ul>*@ <!-- end nav-->
                                            <div class="tab-content">
                                                @*<div class="tab-pane show active card-body pb-0" id="newpost">
                                                    <!-- start search box -->
                                                    <div class="app-search">
                                                        <form>
                                                            <div class="mb-2 w-100 position-relative">
                                                                <input type="search" class="form-control"
                                                                       placeholder="People, groups & messages..." />
                                                                <span class="mdi mdi-magnify search-icon"></span>
                                                            </div>
                                                        </form>
                                                    </div>
                                                    <!-- end search box -->
                                                </div>*@
                                                <!-- users -->
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="card-body py-0 mb-3" data-simplebar style="height: 600px">
                                                            <ul id="connectingList"></ul>

                                                        </div> <!-- end slimscroll-->
                                                    </div> <!-- End col -->
                                                </div> <!-- end users -->
                                            </div> <!-- end tab content-->
                                        </div> <!-- end card-body-->
                                    </div> <!-- end card-->
                                </div>
                                <!-- end chat users-->
                                <!-- chat area -->
                                <div class="col-xxl-6 col-xl-12 order-xl-2">
                                    <div class="card">
                                        <div class="card-body px-0 pb-0" style="height:580px">
                                            <ul id="messageList" class="conversation-list px-3" data-simplebar style="max-height: 554px">
                                                
                                            </ul>
                                        </div> <!-- end card-body -->
                                        <div class="card-body p-0">
                                            <div class="row">
                                                <div class="col">
                                                    <div class="mt-2 bg-light p-3">
                                                            <div class="row">
                                                                <div class="col mb-2 mb-sm-0">
                                                                    <input type="text" class="form-control border-0" placeholder="Enter your text" required="" id="msgforadmin">
                                                                    <div class="invalid-feedback">
                                                                        Please enter your messsage
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-auto">
                                                                    <div class="btn-group">
                                                                        <a href="#" class="btn btn-light"><i class="uil uil-paperclip"></i></a>
                                                                        <a href="#" class="btn btn-light"> <i class='uil uil-smile'></i> </a>
                                                                        <div class="d-grid">
                                                                            <button id="sendMsg" type="submit" class="btn btn-success chat-send"/><i class='uil uil-message'></i></button>
                                                                        </div>
                                                                    </div>
                                                                </div> <!-- end col -->
                                                            </div> <!-- end row-->
                                                    </div>
                                                </div> <!-- end col-->
                                            </div>
                                            <!-- end row -->
                                        </div>
                                    </div> <!-- end card -->
                                </div>
                                <!-- end chat area-->
                                <!-- start user detail -->
                                <div class="col-xxl-3 col-xl-6 order-xl-1 order-xxl-2">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="dropdown float-end">
                                                <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="mdi mdi-dots-horizontal"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <!-- item-->
                                                    <a href="javascript:void(0);" class="dropdown-item">View full</a>
                                                    <!-- item-->
                                                    <a href="javascript:void(0);" class="dropdown-item">Edit Contact Info</a>
                                                    <!-- item-->
                                                    <a href="javascript:void(0);" class="dropdown-item">Remove</a>
                                                </div>
                                            </div>

                                            <div class="mt-3 text-center">
                                                <img src="assets/images/users/avatar-5.jpg" alt="shreyu"
                                                     class="img-thumbnail avatar-lg rounded-circle" />
                                                <h4>Shreyu N</h4>
                                                <button class="btn btn-primary btn-sm mt-1"><i class='uil uil-envelope-add me-1'></i>Send Email</button>
                                                <p class="text-muted mt-2 font-14">Last Interacted: <strong>Few hours back</strong></p>
                                            </div>

                                            <div class="mt-3">
                                                <hr class="" />

                                                <p class="mt-4 mb-1"><strong><i class='uil uil-at'></i> Email:</strong></p>
                                                <p>support@@coderthemes.com</p>

                                                <p class="mt-3 mb-1"><strong><i class='uil uil-phone'></i> Phone Number:</strong></p>
                                                <p>+1 456 9595 9594</p>

                                                <p class="mt-3 mb-1"><strong><i class='uil uil-location'></i> Location:</strong></p>
                                                <p>California, USA</p>

                                                <p class="mt-3 mb-1"><strong><i class='uil uil-globe'></i> Languages:</strong></p>
                                                <p>English, German, Spanish</p>

                                                <p class="mt-3 mb-2"><strong><i class='uil uil-users-alt'></i> Groups:</strong></p>
                                                <p class="mb-0">
                                                    <span class="badge badge-success-lighten p-1 font-14">Work</span>
                                                    <span class="badge badge-primary-lighten p-1 font-14">Friends</span>
                                                </p>
                                            </div>
                                        </div> <!-- end card-body -->
                                    </div> <!-- end card-->
                                </div> <!-- end col -->
                                <!-- end user detail -->
                            </div> <!-- end row-->

                        </div> <!-- container -->

                    </div> <!-- content -->
                    <!-- Footer Start -->
                    <footer class="footer">
                            <div class="row">
                                <div class="col">
                                    <script>document.write(new Date().getFullYear())</script> © Hyper - Coderthemes.com
                                </div>
                            </div>
                    </footer>
                    <!-- end Footer -->

                </div>
            </div>
        </div>
    </section>

</main>

@section Scripts
{
    <script src="~/lib/admin/assets/js/vendor.min.js"></script>
    <script src="~/lib/admin/assets/vendor/apexcharts/apexcharts.min.js"></script>
	<script src="~/lib/microsoft/signalr/dist/browser/signalr.js"></script>
	@*<script src="~/js/sendtocaller.js"></script>*@
    <script>
        var connection = new signalR.HubConnectionBuilder().withUrl("/chatHub").build()

        connection.start()
            .then(() => {
                console.log("connection");
            })
            .catch((err) => {
                console.log(err.toString());
            });

        connection.on("UpdContent", (connection) => {
            var li = document.createElement("li");
            li.setAttribute("class", "list-group-item");
            li.textContent = connection;
            document.getElementById("connectingList").appendChild(li);
        });

        connection.on("UpdSelfID", (id) => {
            var selfID = document.getElementById("SelfID");
            selfID.innerHTML = id;
        });

        connection.on("SendtoAdmin", (msg,name) => {
            var li = document.createElement("li");
            li.setAttribute("class", "clearfix odd");
            var textdiv=document.createElement("div");
            textdiv.setAttribute("class","coversation-text")
            var wrapdiv=document.createElement("div");
            wrapdiv.setAttribute("class","ctext-wrap")
            var i=document.createElement("i")
            i.textContent=name;
            var p=document.createElement("p")
            p.textContent=msg;
            wrapdiv.appendChild(i).appendChild(p)
            textdiv.appendChild(wrapdiv);
            li.appendChild(textdiv);
            document.getElementById("messageList").appendChild(li);
        });

        document.getElementById("sendMsg").addEventListener("click", function (event) {
            var message = document.getElementById("msgforadmin").value;
            connection.invoke("SendMessage", message).catch((err)=>{
                return console.log(err.toString())
            });
            document.getElementById("msgforadmin").value = "";
            event.preventDefault();
        });
        
    </script>
}